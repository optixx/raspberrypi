#include "int.h"
#define PL050_KMI_KB_BASE		0x18000000 // keyboard
#define PL050_KMI_MS_BASE		0x19000000 // mouse
#define PL050_KMICR				0x00
#define PL050_KMISTAT			0x04
#define PL050_KMIDATA			0x08
#define PL050_KMICLKDIV			0x0C
#define PL050_KMIIR				0x10

typedef enum
{
	PL050_KMICR_KMITYPE			= (1 << 5),
	PL050_KMICR_KMIRXINTREN		= (1 << 4),
	PL050_KMICR_KMITXINTREN		= (1 << 3),
	PL050_KMICR_KMIEN			= (1 << 2),
	PL050_KMICR_FKMID			= (1 << 1),
	PL050_KMICR_FKMIC			= (1 << 0)
} pl050KmiControlRegister;

typedef enum
{
	PL050_KMISTAT_TXEMPTY		= (1 << 6),
	PL050_KMISTAT_TXBUSY		= (1 << 5),
	PL050_KMISTAT_RXFULL		= (1 << 4),
	PL050_KMISTAT_RXBUSY		= (1 << 3),
	PL050_KMISTAT_RXPARITY		= (1 << 2),
	PL050_KMISTAT_KMIC			= (1 << 1),
	PL050_KMISTAT_KMID			= (1 << 0)
} pl050KmiStatusRegister;

#define PL011_UART_BASE			0x16000000
#define PL011_UARTDR			0x00
#define PL011_UARTSRSR			0x04
#define PL011_UARTECR			0x04
#define PL011_UARTFR			0x18
#define PL011_UARTILPR			0x20
#define PL011_UARTIBRD			0x24
#define PL011_UARTFBRD			0x28
#define PL011_UARTLCR_H			0x2C
#define PL011_UARTCR			0x30
#define PL011_UARTIFLS			0x34
#define PL011_UARTIMSC			0x38
#define PL011_UARTRIS			0x3C
#define PL011_UARTMIS			0x40
#define PL011_UARTICR			0x44
#define PL011_UARTPERIPHID0		0xFE0
#define PL011_UARTPERIPHID1		0xFE3
#define PL011_UARTPERIPHID2		0xFE8
#define PL011_UARTPERIPHID3		0xFEC
#define PL011_UARTPCELLID0		0xFF0
#define PL011_UARTPCELLID1		0xFF4
#define PL011_UARTPCELLID2		0xFF8
#define PL011_UARTPCELLID3		0xFFC

typedef enum
{
	PL011_UARTFR_CTS			= (1 << 0),
	PL011_UARTFR_DSR			= (1 << 1),
	PL011_UARTFR_DCD			= (1 << 2),
	PL011_UARTFR_BUSY			= (1 << 3),
	PL011_UARTFR_RXFE			= (1 << 4),
	PL011_UARTFR_TXFF			= (1 << 5),
	PL011_UARTFR_RXFF			= (1 << 6),
	PL011_UARTFR_TXFE			= (1 << 7),
	PL011_UARTFR_RI				= (1 << 8)
} pl011FlagRegister;


#define PL110_BASE				0xc0000000
#define PL110_LCDTIMING0		0x00
#define PL110_LCDTIMING1		0x04
#define PL110_LCDTIMING2		0x08
#define PL110_LCDTIMING3		0x0C
#define PL110_LCDUPBASE			0x10
#define PL110_LCDLPBASE			0x14
#define PL110_LCDIMSC			0x18
#define PL110_LCDCONTROL		0x1C
#define PL110_LCDRIS			0x20
#define PL110_LCDMIS			0x24
#define PL110_LCDICR			0x28
#define PL110_LCDUPCURR			0x2C
#define PL110_LCDLPCURR			0x30
#define PL110_LCDPALETTE		0x200
#define PL110_CLCPERIPHID0		0xFE0
#define PL110_CLCPERIPHID1		0xFE4
#define PL110_CLCPERIPHID2		0xFE8
#define PL110_CLCPERIPHID3		0xFEC
#define PL110_CLCPCELLID0		0xFF0
#define PL110_CLCPCELLID1		0xFF4
#define PL110_CLCPCELLID2		0xFF8
#define PL110_CLCPCELLID3		0xFFC

void pl011_uart_write_char(char value);
void pl011_uart_write_string(const char * str);
void pl011_uart_write_hex(uint32_t value);


